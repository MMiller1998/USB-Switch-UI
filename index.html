<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <title>Switch Port Control</title>
  </head>

  <body>
    <div id="connectionModal" class="modal">
      <div class="modal-content box">
        <p>Establishing connection. Please wait...</p>
        <div class="loader"></div> 
      </div>
    </div>

    <script type="text/javascript" src="buttons.js"></script>
    <script type="text/javascript" src="portScript.js"></script>
    <script type="text/javascript" src="testConnection.js"></script>
    <script type="text/javascript" src="statusUpdate.js"></script>
    <script>
      const windowIpc = require('electron').ipcRenderer
      setTimeout(() => {
        createIndexBtns();
        sendNames();
      }, 500);

      windowIpc.on('btn-updated', (event, arg) => {
        console.log("New main window names recieved");
        updateBtns(arg);
      })
      
      windowIpc.on('ports-on', () => {
        console.log("All ports on");
        activateAll();
      })
      
      windowIpc.on('ports-off', () => {
        console.log("All ports off");
        deactivateAll();
      })

      function sendNames() {      
        var btnArray = getBtnNames();
        windowIpc.send('main-window-btns', btnArray);
      }
    </script>

  </body>
</html>